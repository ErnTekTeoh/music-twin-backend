syntax = "proto2";

option go_package = "/pb";


// COMMAND: protoc --go_out=proto/ proto/service.proto

message Constant {
  enum ErrorCode {
    ERROR_CODE_SUCCESS = 0;
    ERROR_CODE_INVALID_REQUEST_TYPE = 1;
    ERROR_CODE_INVALID_RESPONSE_TYPE = 2;
    ERROR_CODE_INVALID_REQUEST_PARAM = 3;
    ERROR_CODE_BUSINESS_ERROR = 4;
    ERROR_CODE_UNAUTHORIZED_OPERATION = 5;
  }

}

message RequestMeta {
  optional int32 user_id = 1;
}


message RegisterUserRequest {
  optional RequestMeta request_meta = 1;
  optional string email = 2;
  optional string password = 3;
}

message RegisterUserResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional bool is_successful = 3;
  optional string token = 4;
}

message HealthCheckRequest {
}

message HealthCheckResponse {
  optional int32 error = 1;
  optional string error_message = 2;
}

message LoginRequest {
  optional RequestMeta request_meta = 1;
  optional string email = 2;
  optional string password = 3;
}

message LoginResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional string token = 3;
}

message SearchTrackRequest {
  optional RequestMeta request_meta = 1;
  optional string title = 2;
  optional string artist = 3;
}

message SearchTrackResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  // must be same struct as Add liked song endpoint
  repeated LikedSong results = 3;
}

message Track {
  optional string song_name = 1;
  optional string track_image_url = 4;
  optional int32 external_dg_id = 5;
  optional string external_am_id = 6;
}

message Artist {
  optional string artist_name = 1;
  optional string artist_image_url = 2;
  optional int32 external_dg_id = 3;
  optional string external_am_id = 6;
}

message SearchArtistRequest {
  optional RequestMeta request_meta = 1;
  optional string name = 2;
}

message SearchArtistResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  // must be same struct as Add liked artist endpoint
  repeated LikedArtist results = 3;
}

message UpdateDisplayNameRequest {
  optional RequestMeta request_meta = 1;
  optional string display_name = 2;
}

message UpdateDisplayNameResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional bool is_successful = 3;
}

message TopArtist {
  optional string artist_name = 1;
  optional int32 external_dg_id = 2;
}

message TopSongs {
  optional string song_name = 1;
  optional int32 external_dg_id = 2;
}

// must be used for search for liked artist + add liked artist
message LikedArtist {
  optional string artist_name = 1;
  optional string external_am_id = 2;
  optional string artist_image_url = 3;
  optional bool is_liked = 4;
}

// must be used for search for liked songs + add liked songs
message LikedSong {
  optional string song_name = 1;
  optional string artist_name = 2;
  optional string external_am_id = 3;
  optional string song_image_url = 4;
  optional bool is_liked = 5;
}

message AddLikedArtistsRequest {
  optional RequestMeta request_meta = 1;
  repeated LikedArtist liked_artists = 2;
}

message AddLikedArtistsResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional bool is_successful = 3;
}

message AddLikedSongsRequest {
  optional RequestMeta request_meta = 1;
  repeated LikedSong liked_songs = 2;
}

message AddLikedSongsResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional bool is_successful = 3;
}

message GetHomepageRequest {
  optional RequestMeta request_meta = 1;
}

message GetHomepageResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  repeated HomepageCard cards = 3;
  optional UserDetails user_details = 4;
}


message HomepageCard {
  optional SongSuggestionCard song_suggestion_card = 1;
  optional SongPollCard song_poll_card = 2;
}

message SongSuggestionCard {
  optional string song_title = 1;
  optional string artist_name = 2;
  optional string image_url = 3;
  optional string card_header = 4;
  optional string card_subheader = 5;
  optional string recommend_reason = 6;
}

message SongPollCard {
  optional string card_header = 1;
  optional string card_subheader = 2;
  optional string card_disclaimer = 3;
  repeated SongPollCardOption options = 4;
}

message SongPollCardOption {
  optional string song_title = 1;
  optional string artist_name = 2;
  optional string image_url = 3;
  optional int32 song_poll_card_option_id = 4;
  optional int32 song_poll_card_id = 5;
}

message GetTrendingChartsRequest {
  optional RequestMeta request_meta = 1;
}

message GetTrendingChartsResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  repeated LikedSong top_songs = 3;
  repeated TopChartAlbum top_albums = 4;
}


message TopChartAlbum {
  optional string album_name = 1;
  optional string artist_name = 2;
  optional string album_image_url = 3;
  optional string external_am_id = 4;
}

message UpdateMySocialsRequest {
  optional RequestMeta request_meta = 1;
  optional string input = 2;
  optional string social_to_update = 3;
}

message UpdateMySocialsResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional bool is_successful = 3;
}

message GetMySocialsRequest {
  optional RequestMeta request_meta = 1;
}

message GetMySocialsResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional string instagram = 3;
  optional string email = 4;
  optional string telegram = 5;
  optional string whatsapp = 6;
}

message GetUserProfileRequest {
  optional RequestMeta request_meta = 1;
}

message GetUserProfileResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional UserDetails user_details = 3;
repeated LikedSong liked_songs = 4;
repeated LikedArtist liked_artists = 5;
optional MySocials my_socials = 6;

}

message UserDetails {
  optional string display_name = 1;
  optional string profile_image_url = 2;
  optional string user_referral_code = 3;
}

message MySocials {
  optional string telegram = 1;
  optional string whatsapp = 2;
  optional string instagram = 3;
  optional string email = 4;
}

message GetLikedSongsRequest {
  optional RequestMeta request_meta = 1;
}

message GetLikedSongsResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  repeated LikedSong liked_songs = 3;
}

message ToggleLikedSongRequest {
  optional RequestMeta request_meta = 1;
  optional LikedSong liked_song = 2;
}

message ToggleLikedSongResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional bool is_successful = 3;
}

message ToggleLikedArtistRequest {
  optional RequestMeta request_meta = 1;
  optional LikedArtist liked_artist = 2;
}

message ToggleLikedArtistResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  optional bool is_successful = 3;
}


message GetLikedArtistsRequest {
  optional RequestMeta request_meta = 1;
}

message GetLikedArtistsResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  repeated LikedArtist liked_artists = 3;
}

message GetConnectPageRequest {
  optional RequestMeta request_meta = 1;
}

message GetConnectPageResponse {
  optional int32 error = 1;
  optional string error_message = 2;
  repeated CommunityHighlight community_highlights = 3;
  optional UserDetails user_details = 4;
}

message CommunityHighlight {
  optional string type = 1;                      // e.g. "song_like", "taste_overlap"
  optional string title = 2;
  optional string subtitle = 3;
  optional string avatar_image_url = 4;
}
